<!DOCTYPE html><html lang="zh-CN"><head><link href="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.2.0/css/index.css" rel="stylesheet"><meta charset="utf-8"><meta name="renderer" content="webkit"><meta name="force-rendering" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"><meta name="HandheldFriendly" content="True"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/forliuyifei/forliuyifei.github.io.bak@master/img/dog.png"><link rel="icon" type="image/png" sizes="16x16" href="https://cdn.jsdelivr.net/gh/forliuyifei/forliuyifei.github.io.bak@master/img/dog.png"><link rel="icon" type="image/png" sizes="32x32" href="https://cdn.jsdelivr.net/gh/forliuyifei/forliuyifei.github.io.bak@master/img/dog.png"><link rel="apple-touch-icon" sizes="180x180" href="https://cdn.jsdelivr.net/gh/forliuyifei/forliuyifei.github.io.bak@master/img/dog.png"><link rel="mask-icon" href="https://cdn.jsdelivr.net/gh/forliuyifei/forliuyifei.github.io.bak@master/img/dog.png"><title>「养老」重装 Deepin OS + 优化记录（备忘手册） | 若风</title><meta name="keywords" content="Deepin, Linux, 记录, 教程, hexo,个人博客,教程,Android,Linux,Termux"><meta name="description" content="惠普 735g5 ，从 Windows 到 Ubuntu、Deepin、Manjaro 再到 Arch Linux，最终还是回归 Deepin OS 的怀抱，期待它越来越好用。 养老了（确信）"><meta property="og:type" content="article"><meta property="og:title" content="「养老」重装 Deepin OS + 优化记录（备忘手册）"><meta property="og:url" content="https://loafing.cn/posts/Hello-Deepin-my-old-friend.html"><meta property="og:site_name" content="若风"><meta property="og:description" content="惠普 735g5 ，从 Windows 到 Ubuntu、Deepin、Manjaro 再到 Arch Linux，最终还是回归 Deepin OS 的怀抱，期待它越来越好用。 养老了（确信）"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/forliuyifei/img@mater/img/Cover/1612950396411.webp"><meta property="article:published_time" content="2021-02-10T05:08:44.000Z"><meta property="article:modified_time" content="2021-05-04T13:11:44.000Z"><meta property="article:author" content="青菜芋子"><meta property="article:tag" content="Deepin"><meta property="article:tag" content="Linux"><meta property="article:tag" content="记录"><meta property="article:tag" content="教程"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/forliuyifei/img@mater/img/Cover/1612950396411.webp"><link rel="stylesheet" href="/css/style/main.css"><link rel="stylesheet" id="hl-default-theme" href="https://cdn.jsdelivr.net/npm/hexo-theme-cards@1.1.0/dist/css/highlight/solarized-light.min.css" media="none"><link rel="stylesheet" id="hl-dark-theme" href="https://cdn.jsdelivr.net/npm/hexo-theme-cards@1.1.0/dist/css/highlight/solarized-dark.min.css" media="none"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/forliuyifei/forliuyifei.github.io.bak@master/css/style/dark.css"><script src="https://cdn.jsdelivr.net/gh/forliuyifei/forliuyifei.github.io.bak@master/js/darkmode.js"></script><meta name="google-site-verification" content="jjL9uTbb2Bhw0hj9Ut91Eii6UOfQ8BE8lWnmuGkSZ0k"><meta name="baidu-site-verification" content="IIwBCrwDVB"><link rel="canonical" href="https://loafing.cn/posts/hello-deepin-my-old-friend.html"><style type="text/css">.spoiler{display:inline-flex}p.spoiler{display:flex}.spoiler a{pointer-events:none}.spoiler-blur,.spoiler-blur>*{transition:text-shadow .5s ease}.spoiler .spoiler-blur,.spoiler .spoiler-blur>*{color:transparent;background-color:rgba(0,0,0,0);text-shadow:0 0 10px grey;cursor:pointer}.spoiler .spoiler-blur:hover,.spoiler .spoiler-blur:hover>*{text-shadow:0 0 5px grey}.spoiler-box,.spoiler-box>*{transition:color .5s ease,background-color .5s ease}.spoiler .spoiler-box,.spoiler .spoiler-box>*{color:#000;background-color:#000;text-shadow:none}</style><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="若风" type="application/atom+xml"></head><body><div id="app" tabindex="-1"><header class="header"><div class="header__left"><a href="/" class="button"><span class="logo__text">青菜芋子</span></a></div><div class="header__right"><div class="navbar__menus"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.travellings.cn/go.html" class="navbar-menu button">开往</a> <a href="/archives/" class="navbar-menu button">归档</a> <a href="/tags/" class="navbar-menu button">标签</a> <a href="mailto:forzqx@qq.com" rel="external nofollow noreferrer" class="navbar-menu button">邮件</a> <a href="/atom.xml" class="navbar-menu button">RSS</a></div><a href="/search/" id="btn-search"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="24" height="24" fill="currentColor" stroke="currentColor" stroke-width="32"><path d="M192 448c0-141.152 114.848-256 256-256s256 114.848 256 256-114.848 256-256 256-256-114.848-256-256z m710.624 409.376l-206.88-206.88A318.784 318.784 0 0 0 768 448c0-176.736-143.264-320-320-320S128 271.264 128 448s143.264 320 320 320a318.784 318.784 0 0 0 202.496-72.256l206.88 206.88 45.248-45.248z"></path></svg> </a><a href="javaScript:void(0);" rel="external nofollow noreferrer" id="btn-toggle-dark"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg> </a><a class="dropdown-icon button" id="btn-dropdown" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="24" height="24" fill="none" stroke="currentColor" stroke-width="0.7" stroke-linecap="round" stroke-linejoin="round"><path fill="currentColor" d="M3.314,4.8h13.372c0.41,0,0.743-0.333,0.743-0.743c0-0.41-0.333-0.743-0.743-0.743H3.314c-0.41,0-0.743,0.333-0.743,0.743C2.571,4.467,2.904,4.8,3.314,4.8z M16.686,15.2H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,15.2,16.686,15.2z M16.686,9.257H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,9.257,16.686,9.257z"></path></svg></a><div class="dropdown-menus" id="dropdown-menus"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.travellings.cn/go.html" class="dropdown-menu button">开往</a> <a href="/archives/" class="dropdown-menu button">归档</a> <a href="/tags/" class="dropdown-menu button">标签</a> <a href="mailto:forzqx@qq.com" rel="external nofollow noreferrer" class="dropdown-menu button">邮件</a> <a href="/atom.xml" class="dropdown-menu button">RSS</a></div></div></header><script defer src="https://sdk.jinrishici.com/v2/browser/jinrishici.js" charset="utf-8"></script><main class="main"><div class="post-title"><h1 class="post-title__text">「养老」重装 Deepin OS + 优化记录（备忘手册）</h1><div class="post-title__meta"><a href="/archives/2021/02/" class="post-meta__date button">2021 二月 10日 , 星期三 , 13:08 下午</a> <span class="separate-dot"></span><a href="/categories/%E5%8E%9F%E5%88%9B/" class="button">原创</a></div></div><aside class="post-side"><div class="post-side__toc"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E6%96%B0%E8%A1%A5%E5%85%85"><span class="toc-number">1.</span> <span class="toc-text">最新补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8%E5%90%8E%E6%B2%A1%E5%A3%B0%E9%9F%B3"><span class="toc-number">1.1.</span> <span class="toc-text">升级内核后没声音</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E7%B3%BB%E7%BB%9F%E6%97%B6%E6%9F%90%E4%BA%9B%E8%BD%AF%E4%BB%B6%E4%B8%8D%E6%9B%B4%E6%96%B0"><span class="toc-number">1.2.</span> <span class="toc-text">升级系统时某些软件不更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9D%9A%E6%9E%9C%E4%BA%91%E9%87%8D%E5%A4%8D%E6%8F%90%E7%A4%BA%E6%9B%B4%E6%96%B0"><span class="toc-number">1.3.</span> <span class="toc-text">坚果云重复提示更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zip-%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6%E5%90%8D%E5%B8%A6%E4%B8%AD%E6%96%87%E7%9A%84%E6%96%87%E4%BB%B6%E4%B9%B1%E7%A0%81"><span class="toc-number">1.4.</span> <span class="toc-text">zip 解压文件名带中文的文件乱码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#20-1-%E5%8D%87%E7%BA%A7%E8%87%B3-20-2-%E7%BF%BB%E8%BD%A6"><span class="toc-number">1.5.</span> <span class="toc-text">20.1 升级至 20.2 翻车</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E8%87%AA%E5%B7%B1%E6%9D%82%E4%B9%B1%E7%9A%84%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E6%B7%BB%E5%8A%A0%E5%8D%B7%E6%A0%87"><span class="toc-number">1.6.</span> <span class="toc-text">给自己杂乱的磁盘分区添加卷标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E6%9C%BA%E3%80%81%E6%B3%A8%E9%94%80%E8%A2%AB%E9%98%BB%E6%AD%A2"><span class="toc-number">1.7.</span> <span class="toc-text">关机、注销被阻止</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E6%9C%80%E6%96%B0-adb-%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="toc-number">1.8.</span> <span class="toc-text">升级最新 adb 工具包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pip-%E5%8D%87%E7%BA%A7%E6%89%80%E6%9C%89%E5%8C%85"><span class="toc-number">1.9.</span> <span class="toc-text">pip 升级所有包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%90%E8%97%8F-snapd-%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%90%8E%E5%A4%9A%E5%87%BA%E7%9A%84%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="toc-number">1.10.</span> <span class="toc-text">隐藏 snapd 安装软件后多出的磁盘分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lazygit"><span class="toc-number">1.11.</span> <span class="toc-text">lazygit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Docker"><span class="toc-number">1.12.</span> <span class="toc-text">安装 Docker</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8-fish-%E4%B8%8B%E4%BD%BF%E7%94%A8-autojump"><span class="toc-number">1.13.</span> <span class="toc-text">在 fish 下使用 autojump</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-wine-%E7%89%88-TIM%E3%80%81%E5%BE%AE%E4%BF%A1"><span class="toc-number">1.14.</span> <span class="toc-text">更新 wine 版 TIM、微信</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#alias-rm-trash-put-%E9%98%B2%E6%AD%A2%E6%89%8B%E8%B4%B1"><span class="toc-number">1.15.</span> <span class="toc-text">alias rm&#x3D;&#39;trash-put&#39; 防止手贱</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XDG-user-directories"><span class="toc-number">1.16.</span> <span class="toc-text">XDG user directories</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Xdroid-%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8"><span class="toc-number">1.17.</span> <span class="toc-text">Xdroid 无法启动安卓应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VirtualBox-%E6%8A%A5%E9%94%99-1908"><span class="toc-number">1.18.</span> <span class="toc-text">VirtualBox 报错 1908</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CPU-%E8%B0%83%E5%BA%A6%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2"><span class="toc-number">1.19.</span> <span class="toc-text">CPU 调度快速切换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB%E8%A7%A3%E9%94%81-howdy"><span class="toc-number">1.20.</span> <span class="toc-text">添加人脸识别解锁 howdy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3-WiFi-%E5%8F%B9%E5%8F%B7"><span class="toc-number">1.21.</span> <span class="toc-text">解决 WiFi 叹号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A3%85-Deepin-%E8%AE%B0%E5%BD%95"><span class="toc-number">2.</span> <span class="toc-text">重装 Deepin 记录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#U%E7%9B%98%E5%88%B6%E4%BD%9C%E5%90%AF%E5%8A%A8%E7%9B%98"><span class="toc-number">2.1.</span> <span class="toc-text">U盘制作启动盘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E5%8C%BA"><span class="toc-number">2.2.</span> <span class="toc-text">自定义分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E6%9C%BA"><span class="toc-number">2.3.</span> <span class="toc-text">开机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%BC%A9%E6%94%BE-1-5-%E5%80%8D"><span class="toc-number">2.4.</span> <span class="toc-text">全局缩放 1.5 倍</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">安装常用软件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7"><span class="toc-number">3.1.</span> <span class="toc-text">安装基本工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Firefox-%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-number">3.2.</span> <span class="toc-text">Firefox 浏览器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%8C%E9%9D%A2%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">3.3.</span> <span class="toc-text">桌面快捷方式编辑器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#micro-%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">3.4.</span> <span class="toc-text">micro 编辑器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-VBox-%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-number">3.5.</span> <span class="toc-text">安装 VBox 虚拟机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DDE-%E4%BB%BB%E5%8A%A1%E6%A0%8F-CPU%E3%80%81%E6%B5%81%E9%87%8F%E7%9B%91%E6%8E%A7"><span class="toc-number">3.6.</span> <span class="toc-text">DDE 任务栏 CPU、流量监控</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wine5-%E5%BA%94%E7%94%A8%E7%9A%84%E5%88%86%E8%BE%A8%E7%8E%87%E4%BF%AE%E6%94%B9"><span class="toc-number">3.7.</span> <span class="toc-text">wine5 应用的分辨率修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%B8%E6%88%8F"><span class="toc-number">3.8.</span> <span class="toc-text">游戏</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ssh-%E7%9B%B8%E5%85%B3"><span class="toc-number">4.</span> <span class="toc-text">ssh 相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%81%A2%E5%A4%8D%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">4.1.</span> <span class="toc-text">恢复博客搭建环境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GIT-%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81"><span class="toc-number">4.2.</span> <span class="toc-text">GIT 中文乱码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-zsh-%E5%92%8C-oh-my-zsh"><span class="toc-number">5.</span> <span class="toc-text">安装 zsh 和 oh my zsh</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3-Github-%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98"><span class="toc-number">5.1.</span> <span class="toc-text">解决 Github 网络问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%E3%80%81%E5%91%BD%E4%BB%A4%E9%AB%98%E4%BA%AE%E3%80%81%E5%BF%AB%E9%80%9F%E8%B7%B3%E8%BD%AC%E7%9B%AE%E5%BD%95%E3%80%81%E7%BA%A0%E9%94%99%E6%8F%92%E4%BB%B6"><span class="toc-number">5.2.</span> <span class="toc-text">自动补全、命令高亮、快速跳转目录、纠错插件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E5%80%99%E8%AF%AD"><span class="toc-number">6.</span> <span class="toc-text">问候语</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E5%80%BC%E5%BE%97%E6%8A%98%E8%85%BE%E7%9A%84"><span class="toc-number">7.</span> <span class="toc-text">其它值得折腾的</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%95%E5%B1%8F"><span class="toc-number">7.1.</span> <span class="toc-text">投屏</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">8.</span> <span class="toc-text">参考</span></a></li></ol></div></aside><a class="btn-toc button" id="btn-toc" tabindex="0"><svg viewBox="0 0 1024 1024" width="32" height="32" xmlns="http://www.w3.org/2000/svg"><path d="M128 256h64V192H128zM320 256h576V192H320zM128 544h64v-64H128zM320 544h576v-64H320zM128 832h64v-64H128zM320 832h576v-64H320z" fill="currentColor"></path></svg></a><div class="toc-menus" id="toc-menus"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%80%E6%96%B0%E8%A1%A5%E5%85%85"><span class="toc-number">1.</span> <span class="toc-text">最新补充</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E5%86%85%E6%A0%B8%E5%90%8E%E6%B2%A1%E5%A3%B0%E9%9F%B3"><span class="toc-number">1.1.</span> <span class="toc-text">升级内核后没声音</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E7%B3%BB%E7%BB%9F%E6%97%B6%E6%9F%90%E4%BA%9B%E8%BD%AF%E4%BB%B6%E4%B8%8D%E6%9B%B4%E6%96%B0"><span class="toc-number">1.2.</span> <span class="toc-text">升级系统时某些软件不更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9D%9A%E6%9E%9C%E4%BA%91%E9%87%8D%E5%A4%8D%E6%8F%90%E7%A4%BA%E6%9B%B4%E6%96%B0"><span class="toc-number">1.3.</span> <span class="toc-text">坚果云重复提示更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zip-%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6%E5%90%8D%E5%B8%A6%E4%B8%AD%E6%96%87%E7%9A%84%E6%96%87%E4%BB%B6%E4%B9%B1%E7%A0%81"><span class="toc-number">1.4.</span> <span class="toc-text">zip 解压文件名带中文的文件乱码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#20-1-%E5%8D%87%E7%BA%A7%E8%87%B3-20-2-%E7%BF%BB%E8%BD%A6"><span class="toc-number">1.5.</span> <span class="toc-text">20.1 升级至 20.2 翻车</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%99%E8%87%AA%E5%B7%B1%E6%9D%82%E4%B9%B1%E7%9A%84%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA%E6%B7%BB%E5%8A%A0%E5%8D%B7%E6%A0%87"><span class="toc-number">1.6.</span> <span class="toc-text">给自己杂乱的磁盘分区添加卷标</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E6%9C%BA%E3%80%81%E6%B3%A8%E9%94%80%E8%A2%AB%E9%98%BB%E6%AD%A2"><span class="toc-number">1.7.</span> <span class="toc-text">关机、注销被阻止</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8D%87%E7%BA%A7%E6%9C%80%E6%96%B0-adb-%E5%B7%A5%E5%85%B7%E5%8C%85"><span class="toc-number">1.8.</span> <span class="toc-text">升级最新 adb 工具包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#pip-%E5%8D%87%E7%BA%A7%E6%89%80%E6%9C%89%E5%8C%85"><span class="toc-number">1.9.</span> <span class="toc-text">pip 升级所有包</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%90%E8%97%8F-snapd-%E5%AE%89%E8%A3%85%E8%BD%AF%E4%BB%B6%E5%90%8E%E5%A4%9A%E5%87%BA%E7%9A%84%E7%A3%81%E7%9B%98%E5%88%86%E5%8C%BA"><span class="toc-number">1.10.</span> <span class="toc-text">隐藏 snapd 安装软件后多出的磁盘分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#lazygit"><span class="toc-number">1.11.</span> <span class="toc-text">lazygit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Docker"><span class="toc-number">1.12.</span> <span class="toc-text">安装 Docker</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8-fish-%E4%B8%8B%E4%BD%BF%E7%94%A8-autojump"><span class="toc-number">1.13.</span> <span class="toc-text">在 fish 下使用 autojump</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0-wine-%E7%89%88-TIM%E3%80%81%E5%BE%AE%E4%BF%A1"><span class="toc-number">1.14.</span> <span class="toc-text">更新 wine 版 TIM、微信</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#alias-rm-trash-put-%E9%98%B2%E6%AD%A2%E6%89%8B%E8%B4%B1"><span class="toc-number">1.15.</span> <span class="toc-text">alias rm&#x3D;&#39;trash-put&#39; 防止手贱</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XDG-user-directories"><span class="toc-number">1.16.</span> <span class="toc-text">XDG user directories</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Xdroid-%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8%E5%AE%89%E5%8D%93%E5%BA%94%E7%94%A8"><span class="toc-number">1.17.</span> <span class="toc-text">Xdroid 无法启动安卓应用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#VirtualBox-%E6%8A%A5%E9%94%99-1908"><span class="toc-number">1.18.</span> <span class="toc-text">VirtualBox 报错 1908</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CPU-%E8%B0%83%E5%BA%A6%E5%BF%AB%E9%80%9F%E5%88%87%E6%8D%A2"><span class="toc-number">1.19.</span> <span class="toc-text">CPU 调度快速切换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E4%BA%BA%E8%84%B8%E8%AF%86%E5%88%AB%E8%A7%A3%E9%94%81-howdy"><span class="toc-number">1.20.</span> <span class="toc-text">添加人脸识别解锁 howdy</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3-WiFi-%E5%8F%B9%E5%8F%B7"><span class="toc-number">1.21.</span> <span class="toc-text">解决 WiFi 叹号</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A3%85-Deepin-%E8%AE%B0%E5%BD%95"><span class="toc-number">2.</span> <span class="toc-text">重装 Deepin 记录</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#U%E7%9B%98%E5%88%B6%E4%BD%9C%E5%90%AF%E5%8A%A8%E7%9B%98"><span class="toc-number">2.1.</span> <span class="toc-text">U盘制作启动盘</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%88%86%E5%8C%BA"><span class="toc-number">2.2.</span> <span class="toc-text">自定义分区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%80%E6%9C%BA"><span class="toc-number">2.3.</span> <span class="toc-text">开机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E5%B1%80%E7%BC%A9%E6%94%BE-1-5-%E5%80%8D"><span class="toc-number">2.4.</span> <span class="toc-text">全局缩放 1.5 倍</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%B8%B8%E7%94%A8%E8%BD%AF%E4%BB%B6"><span class="toc-number">3.</span> <span class="toc-text">安装常用软件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%9F%BA%E6%9C%AC%E5%B7%A5%E5%85%B7"><span class="toc-number">3.1.</span> <span class="toc-text">安装基本工具</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Firefox-%E6%B5%8F%E8%A7%88%E5%99%A8"><span class="toc-number">3.2.</span> <span class="toc-text">Firefox 浏览器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%8C%E9%9D%A2%E5%BF%AB%E6%8D%B7%E6%96%B9%E5%BC%8F%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">3.3.</span> <span class="toc-text">桌面快捷方式编辑器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#micro-%E7%BC%96%E8%BE%91%E5%99%A8"><span class="toc-number">3.4.</span> <span class="toc-text">micro 编辑器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-VBox-%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-number">3.5.</span> <span class="toc-text">安装 VBox 虚拟机</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DDE-%E4%BB%BB%E5%8A%A1%E6%A0%8F-CPU%E3%80%81%E6%B5%81%E9%87%8F%E7%9B%91%E6%8E%A7"><span class="toc-number">3.6.</span> <span class="toc-text">DDE 任务栏 CPU、流量监控</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#wine5-%E5%BA%94%E7%94%A8%E7%9A%84%E5%88%86%E8%BE%A8%E7%8E%87%E4%BF%AE%E6%94%B9"><span class="toc-number">3.7.</span> <span class="toc-text">wine5 应用的分辨率修改</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B8%B8%E6%88%8F"><span class="toc-number">3.8.</span> <span class="toc-text">游戏</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ssh-%E7%9B%B8%E5%85%B3"><span class="toc-number">4.</span> <span class="toc-text">ssh 相关</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%81%A2%E5%A4%8D%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E7%8E%AF%E5%A2%83"><span class="toc-number">4.1.</span> <span class="toc-text">恢复博客搭建环境</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#GIT-%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81"><span class="toc-number">4.2.</span> <span class="toc-text">GIT 中文乱码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-zsh-%E5%92%8C-oh-my-zsh"><span class="toc-number">5.</span> <span class="toc-text">安装 zsh 和 oh my zsh</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3-Github-%E7%BD%91%E7%BB%9C%E9%97%AE%E9%A2%98"><span class="toc-number">5.1.</span> <span class="toc-text">解决 Github 网络问题</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E8%A1%A5%E5%85%A8%E3%80%81%E5%91%BD%E4%BB%A4%E9%AB%98%E4%BA%AE%E3%80%81%E5%BF%AB%E9%80%9F%E8%B7%B3%E8%BD%AC%E7%9B%AE%E5%BD%95%E3%80%81%E7%BA%A0%E9%94%99%E6%8F%92%E4%BB%B6"><span class="toc-number">5.2.</span> <span class="toc-text">自动补全、命令高亮、快速跳转目录、纠错插件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AE%E5%80%99%E8%AF%AD"><span class="toc-number">6.</span> <span class="toc-text">问候语</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E5%80%BC%E5%BE%97%E6%8A%98%E8%85%BE%E7%9A%84"><span class="toc-number">7.</span> <span class="toc-text">其它值得折腾的</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%95%E5%B1%8F"><span class="toc-number">7.1.</span> <span class="toc-text">投屏</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">8.</span> <span class="toc-text">参考</span></a></li></ol></div><article class="post post__with-toc content-card"><div class="post__header"><div class="post-thumbnail" style="background-image:url(https://cdn.jsdelivr.net/gh/forliuyifei/img@mater/img/Cover/1612950396411.webp)"></div><div class="post__expire" id="post-expired-notify"><p>本文最后更新于 &lt;span id=&#34;expire-date&#34;&gt;&lt;/span&gt; 天前，文中部分描述可能已经过时。</p></div><script>(() => {
            var update = Date.parse("2021-05-04"),
                date = new Date(),
                now = date.getTime(),
                expire = now - update,
                expire_days = Math.floor(expire/(24*3600*1000));
            if (expire_days >= 120) {
                document.querySelectorAll('#expire-date')[0].innerHTML = expire_days;
                document.querySelectorAll('#post-expired-notify')[0].style.display = 'block';
            }
        })();</script></div><div class="post__content"><link rel="stylesheet" type="text&#x2F;css" href="https://cdn.jsdelivr.net/npm/hexo-tag-hint@0.3.1/dist/hexo-tag-hint.min.css"><p>惠普 735g5 ，从 Windows 到 Ubuntu、Deepin、Manjaro 再到 Arch Linux，最终还是回归 Deepin OS 的怀抱，期待它越来越好用。</p><p>养老了（确信）</p><span id="more"></span><h3 id="最新补充">最新补充</h3><h4 id="升级内核后没声音">升级内核后没声音</h4><p>使用上一个版本的内核开机，音乐外放正常。</p><p>索性锁定 Linux 内核版本，没啥必要不更新了。</p><p>筛选查看已安装的内核 <code>dpkg --get-selections|grep linux</code></p><p>卸载有问题的新内核：</p><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo</span> apt remove linux-image-<span class="number">5</span>.<span class="number">12</span>.<span class="number">18</span>-amd64-desktop</span><br><span class="line"><span class="attribute">sudo</span> apt remove linux-headers-<span class="number">5</span>.<span class="number">12</span>.<span class="number">18</span>-amd64-desktop</span><br></pre></td></tr></table></figure><p><strong>锁定正常使用的旧版内核，防止被更新：</strong></p><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo</span> apt-mark hold linux-headers-<span class="number">5</span>.<span class="number">12</span>.<span class="number">14</span>-amd64-desktop linux-image-<span class="number">5</span>.<span class="number">12</span>.<span class="number">14</span>-amd64-desktop</span><br></pre></td></tr></table></figure><p>如需检查标记为保留（锁定）的包：</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="selector-tag">mark</span> showhold</span><br></pre></td></tr></table></figure><p>要解除锁定可以使用如下命令：</p><figure class="highlight ada"><table><tr><td class="code"><pre><span class="line">sudo apt-mark unhold <span class="keyword">PACKAGE</span></span><br></pre></td></tr></table></figure><p>参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.sysgeek.cn/ubuntu-lock-package-version/">https://www.sysgeek.cn/ubuntu-lock-package-version/</a></p><h4 id="升级系统时某些软件不更新">升级系统时某些软件不更新</h4><p>例如：</p><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">sudo apt update &amp;&amp; sudo apt upgrade -y</span><br><span class="line">……</span><br><span class="line">正在读取软件包列表<span class="string">...</span> 完成</span><br><span class="line">正在分析软件包的依赖关系树       </span><br><span class="line">正在读取状态信息<span class="string">...</span> 完成       </span><br><span class="line">有 1 个软件包可以升级。请执行 ‘apt list <span class="params">--upgradable</span>’ 来查看它们。</span><br><span class="line">正在读取软件包列表<span class="string">...</span> 完成</span><br><span class="line">正在分析软件包的依赖关系树       </span><br><span class="line">正在读取状态信息<span class="string">...</span> 完成       </span><br><span class="line">正在计算更新<span class="string">...</span> 完成</span><br><span class="line">下列软件包的版本将保持不变：</span><br><span class="line">  dde-session-shell</span><br><span class="line">升级了 0 个软件包，新安装了 0 个软件包，要卸载 0 个软件包，有 1 个软件包未被升级。</span><br></pre></td></tr></table></figure><p>可以尝试 <code>sudo apt-get dist-upgrade</code></p><figure class="highlight tap"><table><tr><td class="code"><pre><span class="line">sudo apt-get dist-upgrade </span><br><span class="line">正在读取软件包列表... 完成</span><br><span class="line">正在分析软件包的依赖关系树       </span><br><span class="line">正在读取状态信息... 完成       </span><br><span class="line">正在计算更新... 完成</span><br><span class="line">下列软件包将被【卸载】：</span><br><span class="line">  dde-preload</span><br><span class="line">下列软件包将被升级：</span><br><span class="line">  dde-session-shell</span><br><span class="line">升级了<span class="number"> 1 </span>个软件包，新安装了<span class="number"> 0 </span>个软件包，要卸载<span class="number"> 1 </span>个软件包，有<span class="number"> 0 </span>个软件包未被升级。</span><br><span class="line">需要下载<span class="number"> 728 </span>kB 的归档。</span><br><span class="line">解压缩后将会空出 2,005 kB 的空间。</span><br><span class="line">您希望继续执行吗？ [Y/n] y</span><br></pre></td></tr></table></figure><p>参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://forum.ubuntu.com.cn/viewtopic.php?t=486028">https://forum.ubuntu.com.cn/viewtopic.php?t=486028</a></p><h4 id="坚果云重复提示更新">坚果云重复提示更新</h4><p>重启后总是提示正在更新……反反复复大半个月，尝试给坚果云客服发邮件，很快得到邮件反馈（好评👍），建议从源码编译安装，而不是 <code>apt install jianguoyun.com</code> ，问题解决。</p><h4 id="zip-解压文件名带中文的文件乱码">zip 解压文件名带中文的文件乱码</h4><p>由于坚果云流量有限而其它网盘不好用，我只得时不时把手机上的音乐备份至 U 盘，需要时再复制到电脑，为减少碎片文件，加快传输速度，将几百个 .lrc 歌词文件压缩后再备份。</p><p>今天碰到个问题，带中文的歌词文件解压后乱码，无法使用。</p><p>这属于常见问题，解决方案不少，有的看起来还挺麻烦。</p><p>幸好有个简单省力的 unar 命令，参考：<a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.zhihu.com/question/20523036/answer/95225210">Linux 下 zip 文件解压乱码如何解决？ - Find Hao的回答 - 知乎</a></p><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line">unar Lyric歌词<span class="string">.zip</span></span><br></pre></td></tr></table></figure><p><em><strong>注意不是 unrar 。</strong></em></p><h4 id="20-1-升级至-20-2-翻车">20.1 升级至 20.2 翻车</h4><p>愚人节更新后论坛直接炸翻天，一堆进不去桌面环境的，半天后勉强解决。</p><p>苦等半个月，还是一堆 bug 没能修复，备份重装走起。</p><p>这次不敢只用一个 / 分区了，还是把 / 和 /home 分成两个区比较安全，万一不幸又升级坏了，只要覆盖 / 分区进行全新安装应该就好。平时到处搜刮的软件和其它媒体文件都放 /home ，重装之后不必到处重新找（还可能找不到），费时费力。</p><p>重要文件依然建议实时云备份，不嫌麻烦的还可以定时多处备份。</p><blockquote><p><em>You can never be too careful.</em></p></blockquote><p>跑路是不可能跑路的，给 Deepin 多一点包容，期待它成为下一个 MIUI 。</p><h4 id="给自己杂乱的磁盘分区添加卷标">给自己杂乱的磁盘分区添加卷标</h4><p>查看分区信息</p><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">lsblk</span><br><span class="line">sudo blkid -c <span class="regexp">/dev/</span><span class="keyword">null</span></span><br></pre></td></tr></table></figure><p><strong><mark>以下分区路径和挂载点仅供参考，不可盲目操作！！！</mark></strong></p><ul><li>给 NTFS 分区打上 Windows10 标签<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">sudo ntfslabel -f <span class="regexp">/dev/</span>nvme0n1p3 <span class="string">&#x27;Windows10&#x27;</span></span><br></pre></td></tr></table></figure><code>/dev/nvme0n1p3</code> 是该分区所在路径，<code>-f</code> 是强制的意思，方便对已挂载的分区进行操作。</li><li>给 BTRFS 分区打上 Arch 标签<figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo</span> btrfs filesystem label /media/username/b3c6aa7f-<span class="number">23</span>a6-<span class="number">47</span>de-<span class="number">978</span>d-<span class="number">285</span>f622a8e34 &#x27;Arch&#x27;</span><br></pre></td></tr></table></figure><code>/media/username/b3c6aa7f-23a6-47de-978d-285f622a8e34</code> 是目标分区的挂载点。</li><li>给 swap 分区打上 SWAP 标签<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">sudo swaplabel -L ‘SWAP’ <span class="regexp">/dev/</span>nvme0n1p5</span><br></pre></td></tr></table></figure><em>显示 <code>swaplabel: /dev/nvme0n1p5: failed to write label: 文本文件忙</code> ，问题不大，等下次刚开机， swap 分区还没被使用的时候再操作。</em></li><li>给 ext4 分区打上 Deepin 标签<figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">sudo e2label <span class="regexp">/dev/</span>nvme0n1p4 <span class="string">&#x27;Deepin&#x27;</span></span><br></pre></td></tr></table></figure></li></ul><p>重新 <code>sudo blkid -c /dev/null</code> 即可看见新增的 <code>LABEL=&quot;xxx&quot;</code></p><h4 id="关机、注销被阻止">关机、注销被阻止</h4><p>关机提示：</p><blockquote><p><em>Unattended Upgrades Shutdown－Stop ongoing upgrades or perform upgrades before shutdown，以上程序阻止关机，强制关机可能会导致其数据丢失，您可以点击“取消”然后关闭这些程序。</em></p></blockquote><figure class="highlight fortran"><table><tr><td class="code"><pre><span class="line">sudo service unattended-upgrades <span class="keyword">status</span></span><br><span class="line">sudo service unattended-upgrades <span class="keyword">stop</span></span><br></pre></td></tr></table></figure><p>似乎还是不行？</p><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>cat /etc/apt/apt.conf.d/20auto-upgrades</span><br><span class="line"><span class="variable constant_">APT</span><span class="symbol">:</span><span class="symbol">:Periodic</span><span class="symbol">:</span><span class="symbol">:Update-Package-Lists</span> <span class="string">&quot;1&quot;</span>;</span><br><span class="line"><span class="variable constant_">APT</span><span class="symbol">:</span><span class="symbol">:Periodic</span><span class="symbol">:</span><span class="symbol">:Unattended-Upgrade</span> <span class="string">&quot;1&quot;</span>;</span><br></pre></td></tr></table></figure><p>那就把第二个 1 改为 0 ，关闭自动更新。</p><h4 id="升级最新-adb-工具包">升级最新 adb 工具包</h4><p><em>Deepin 的软件源更新速度有点感人，<code>apt install</code> 安装的还是半年前的版本。</em></p><p>查看当前 adb 版本及所在目录：</p><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">$ adb <span class="keyword">version</span></span><br><span class="line">Android <span class="keyword">Debug</span> Bridge <span class="keyword">version</span> <span class="number">1.0</span><span class="number">.39</span></span><br><span class="line"><span class="keyword">Version</span> <span class="number">1</span>:<span class="number">8.1</span><span class="number">.1</span><span class="number">-1</span>+r23<span class="number">-5.4</span><span class="number">-1</span>+eagle</span><br><span class="line">Installed <span class="keyword">as</span> /usr/lib/android-sdk/platform-tools/adb</span><br></pre></td></tr></table></figure><p>备份当前 adb 工具包：</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">sudo mv <span class="regexp">/usr/</span>lib<span class="regexp">/android-sdk/</span>platform-tools<span class="regexp">/ /u</span>sr<span class="regexp">/lib/</span>android-sdk<span class="regexp">/platform-tools.bak/</span></span><br></pre></td></tr></table></figure><p>下载最新 adb 包解压、测试：</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">cd ~/Downloads</span><br><span class="line">wget https:<span class="regexp">//</span>dl.google.com<span class="regexp">/android/</span>repository/platform-tools-latest-linux.zip</span><br><span class="line">unzip platform-tools-latest-linux.zip</span><br><span class="line">rm platform-tools-latest-linux.zip</span><br><span class="line">cd platform-tools/</span><br><span class="line">./adb version <span class="comment"># 确认可用</span></span><br><span class="line"></span><br><span class="line">cd ..</span><br><span class="line">sudo cp -r platform-tools<span class="regexp">/ /u</span>sr<span class="regexp">/lib/</span>android-sdk<span class="regexp">/platform-tools/</span></span><br></pre></td></tr></table></figure><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">$ adb <span class="keyword">version</span></span><br><span class="line">Android <span class="keyword">Debug</span> Bridge <span class="keyword">version</span> <span class="number">1.0</span><span class="number">.41</span></span><br><span class="line"><span class="keyword">Version</span> <span class="number">31.0</span><span class="number">.1</span><span class="number">-7187441</span></span><br><span class="line">Installed <span class="keyword">as</span> /usr/lib/android-sdk/platform-tools/adb</span><br></pre></td></tr></table></figure><p>升级完毕，该删的都可以删了。</p><h4 id="pip-升级所有包">pip 升级所有包</h4><p>参考 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/kl28978113/article/details/77980778">Python 使用 pip 升级所有包</a></p><figure class="highlight pgsql"><table><tr><td class="code"><pre><span class="line">pip list</span><br><span class="line">pip list <span class="comment">--outdate</span></span><br><span class="line">pip <span class="keyword">freeze</span> <span class="comment">--local | grep -v &#x27;^-e&#x27; | cut -d = -f 1  | xargs -n1 pip install -U</span></span><br></pre></td></tr></table></figure><h4 id="隐藏-snapd-安装软件后多出的磁盘分区">隐藏 snapd 安装软件后多出的磁盘分区</h4><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">$ lsblk -f</span><br><span class="line">NAME        FSTYPE   LABEL         UUID                                 FSAVAIL FSUSE% MOUNTPOINT</span><br><span class="line">loop0       squashfs                                                          <span class="number">0</span>   <span class="number">100</span>% <span class="regexp">/snap/</span>core20/<span class="number">904</span></span><br><span class="line">loop1       squashfs                                                          <span class="number">0</span>   <span class="number">100</span>% <span class="regexp">/snap/</span>bombsquad/<span class="number">5</span></span><br><span class="line">……</span><br></pre></td></tr></table></figure><p>不难发现 snapd 安装软件后，生成的分区都是 loop0、loop1 这样的命名方式。</p><p>新建一条隐藏规则：</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">$ sudo micro <span class="regexp">/etc/u</span>dev<span class="regexp">/rules.d/</span><span class="number">90</span>-hide_parts.rules</span><br><span class="line">KERNEL==<span class="string">&quot;loop*&quot;</span>,ENV&#123;UDISKS_IGNORE&#125;=<span class="string">&quot;1&quot;</span></span><br></pre></td></tr></table></figure><p>重启，文管里面就不会再显示烦人的一大堆分区了。</p><h4 id="lazygit"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jesseduffield/lazygit">lazygit</a></h4><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">cd ~<span class="regexp">/.local/</span>bin</span><br><span class="line">wget https:<span class="regexp">//gi</span>thub.com<span class="regexp">/jesseduffield/</span>lazygit<span class="regexp">/releases/</span>download<span class="regexp">/v0.26.1/</span>lazygit_0.<span class="number">26.1</span>_Linux_x86_64.tar.gz</span><br><span class="line">tar xvf lazygit_0.<span class="number">26.1</span>_Linux_x86_64.tar.gz</span><br><span class="line">rm lazygit_0.<span class="number">26.1</span>_Linux_x86_64.tar.gz LICENCE README.md</span><br><span class="line">lazygit --help</span><br></pre></td></tr></table></figure><p>以后进入自己的博客目录，运行 <code>lazygit</code> 就能很方便地追踪文件变动。</p><h4 id="安装-Docker">安装 Docker</h4><p><strong>安装：</strong></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://developer.aliyun.com/article/110806">使用官方安装脚本自动安装 （仅适用于公网环境）</a></p><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">curl -fsSL <span class="keyword">https</span>://<span class="built_in">get</span>.docker.com | bash -s docker <span class="comment">--mirror Aliyun</span></span><br></pre></td></tr></table></figure><p>安装成功后除显示版本信息外（今后可以使用 <code>sudo docker version</code> 进行查看），还有下列提示：</p><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">If you would like <span class="built_in">to</span> use Docker <span class="keyword">as</span> <span class="keyword">a</span> non-root user, you should now consider</span><br><span class="line">adding your user <span class="built_in">to</span> <span class="keyword">the</span> <span class="string">&quot;docker&quot;</span> group <span class="keyword">with</span> something like:</span><br><span class="line"></span><br><span class="line">  sudo usermod -aG docker &lt;用户名&gt;</span><br><span class="line"></span><br><span class="line">Remember that you will have <span class="built_in">to</span> <span class="built_in">log</span> out <span class="keyword">and</span> back <span class="keyword">in</span> <span class="keyword">for</span> this <span class="built_in">to</span> take effect!</span><br><span class="line"></span><br><span class="line">WARNING: Adding <span class="keyword">a</span> user <span class="built_in">to</span> <span class="keyword">the</span> <span class="string">&quot;docker&quot;</span> group will grant <span class="keyword">the</span> ability <span class="built_in">to</span> run</span><br><span class="line">         containers which can be used <span class="built_in">to</span> obtain root privileges <span class="keyword">on</span> <span class="title">the</span></span><br><span class="line">         docker host.</span><br><span class="line">         Refer <span class="built_in">to</span> <span class="keyword">https</span>://docs.docker.com/engine/security/security/<span class="comment">#docker-daemon-attack-surface</span></span><br><span class="line">         <span class="keyword">for</span> more information.</span><br></pre></td></tr></table></figure><p>那就乖乖 <code>sudo usermod -aG docker &lt;用户名&gt;</code></p><p><code>sudo docker run hello-world</code> 测试能否正常运行 docker。</p><p><strong>docker-compose：</strong></p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">sudo curl -L <span class="string">&quot;https://github.com/docker/compose/releases/download/1.28.6/docker-compose-$(uname -s)-$(uname -m)&quot;</span> -o <span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>docker-compose | bash</span><br><span class="line">sudo chmod +x <span class="regexp">/usr/</span>local<span class="regexp">/bin/</span>docker-compose</span><br><span class="line">docker-compose --version</span><br></pre></td></tr></table></figure><p><strong>国内镜像加速：</strong></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors">申请阿里云镜像加速</a></p><blockquote><p><em>您可以通过修改daemon配置文件/etc/docker/daemon.json来使用加速器</em></p></blockquote><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">sudo mkdir -p <span class="regexp">/etc/</span>docker</span><br><span class="line">sudo tee <span class="regexp">/etc/</span>docker/daemon.json &lt;&lt;-<span class="string">&#x27;EOF&#x27;</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">&quot;registry-mirrors&quot;</span>: [<span class="string">&quot;https://abcdefgh.mirror.aliyuncs.com&quot;</span>]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl restart docker</span><br><span class="line">cat <span class="regexp">/etc/</span>docker/daemon.json</span><br></pre></td></tr></table></figure><p><strong>管理面板工具</strong></p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/jesseduffield/lazydocker">lazydocker</a> 看起来不错，和 gotop 界面风格类似。</p><p>作者给出了一键安装脚本：</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">curl https:<span class="regexp">//</span>raw.githubusercontent.com<span class="regexp">/jesseduffield/</span>lazydocker<span class="regexp">/master/</span>scripts/install_update_linux.sh | bash</span><br></pre></td></tr></table></figure><p>lazydocker 的二进制文件默认放进 <code>/usr/local/bin</code></p><p>如果网络状况不太好，在终端下载不动，也可以前往它的 release 页手动下载编译好的对应架构的压缩包，解压后将可执行文件丢进 <code>~/.local/bin</code> 或者其它自己喜欢的文件夹。</p><h4 id="在-fish-下使用-autojump">在 fish 下使用 autojump</h4><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line">sudo apt install <span class="built_in">auto</span>jump</span><br><span class="line">omf install <span class="built_in">auto</span>jump</span><br></pre></td></tr></table></figure><p><code>autojump d</code> 报错：</p><p><code>Please source the correct autojump file in your shell's startup file. For more information, please reinstall autojump and read the post installation instructions.</code></p><p>Deepin 的文件管理器会时不时自动新建文件索引以加快搜索速度，所以直接在文管里面 Ctrl + F 搜索 autojump 就好，find 命令太慢了。</p><p>找到之后 source 一下看看：</p><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"><span class="keyword">source</span> <span class="regexp">/usr/</span>share<span class="regexp">/autojump/</span>autojump.fish</span><br></pre></td></tr></table></figure><p><em>顺便附一个错误示范：</em></p><details><summary>点击展开</summary><div class="fold-content"><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">source</span> <span class="regexp">/usr/</span>share<span class="regexp">/autojump/</span>autojump.sh</span><br><span class="line"><span class="regexp">/usr/</span>share<span class="regexp">/autojump/</span>autojump.sh (line <span class="number">16</span>): Missing end to balance <span class="keyword">this</span> <span class="keyword">if</span> statement                                   <span class="keyword">if</span> [ <span class="string">&quot;$&#123;shell&#125;&quot;</span> = <span class="string">&quot;sh&quot;</span> ]; then</span><br><span class="line">^</span><br><span class="line"><span class="keyword">from</span> sourcing <span class="keyword">file</span> <span class="regexp">/usr/</span>share<span class="regexp">/autojump/</span>autojump.sh                 called on standard input</span><br><span class="line"></span><br><span class="line"><span class="keyword">source</span>：读取文件 “<span class="regexp">/usr/</span>share<span class="regexp">/autojump/</span>autojump.sh” 时发生错误</span><br></pre></td></tr></table></figure></div></details><p>这下可以正常使用 <code>autojump 目录</code> 或者 <code>j 目录</code> 了。</p><p>最后 <code>micro ~/.config/fish/config.fish</code></p><p>加一条 <code>source /usr/share/autojump/autojump.fish</code> 进去即可。</p><h4 id="更新-wine-版-TIM、微信">更新 wine 版 TIM、微信</h4><p><em>直接在软件内更新失败。</em></p><p>前往腾讯官网下载 Windows 版本的安装包（ xxx.exe ）。</p><p><code>cd ~/Downloads</code> 进入下载文件夹，运行类似下面的命令：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">env</span> WINEPREFIX=<span class="string">&quot;<span class="variable">$HOME</span>/.deepinwine/Spark-TIM/&quot;</span> deepin-wine5 TIM3.3.5.22018.exe</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">env</span> WINEPREFIX=<span class="string">&quot;<span class="variable">$HOME</span>/.deepinwine/Deepin-WeChat/&quot;</span> deepin-wine5 WeChatSetup.exe</span><br></pre></td></tr></table></figure><p><strong>文件夹和安装包建议使用 Tab 键补全。</strong></p><h4 id="alias-rm-trash-put-防止手贱">alias rm='trash-put' 防止手贱</h4><blockquote><p><em>删库之后没有跑路，只有泪目。</em></p></blockquote><p>官方文档见这篇 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/andreafrancia/trash-cli/blob/master/README_zh-CN.rst">trash-cli —— 回收站的命令行界面</a></p><p><code>sudo apt install trash-cli</code></p><figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">trash-<span class="built_in">put</span>           把文件或目录移动到回收站</span><br><span class="line">trash-<span class="literal">empty</span>         清空回收站</span><br><span class="line">trash-list          列出回收站文件</span><br><span class="line">trash-restore       恢复回收站文件</span><br><span class="line">trash-rm            删除回收站文件</span><br></pre></td></tr></table></figure><p>从 home 分区移动到回收站的文件在 <code>~/.local/share/Trash/</code> ，基本兼容深度文件管理器的回收站 <s>，但使用后者 delete 的文件，不能用前者的命令还原（无伤大雅）</s>。</p><p>将 <code>alias rm='trash-put'</code> 添进 <code>~/.zshrc</code>，rm 命令真的很危险，即便不加 sudo 。</p><p>如果偶尔确实有 <code>rm</code> 的需要，使用 <code>\rm</code> 即可取消别名。</p><p><strong>最好还是多做几手备份准备，咸鱼上捡个成色不错的硬盘也不贵，机械盘就挺好，使用 timewhift 等工具进行快照式增量备份。</strong></p><p><strong><mark>内存有价，数据无价！</mark></strong></p><h4 id="XDG-user-directories"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://wiki.archlinux.org/index.php/XDG_user_directories_(%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87)">XDG user directories</a></h4><p>解决文件管理器左侧 <code>下载</code> ≠ <code>~/Download</code> 的情况。</p><h4 id="Xdroid-无法启动安卓应用">Xdroid 无法启动安卓应用</h4><p>原本正常使用，但某次系统更新之后，Xdroid 只能打开程序启动界面，无法启动任何安卓应用，连报错信息都不显示。</p><p><strong>解决：</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">sudo dkms uninstall deepin-anything/0.0</span><br></pre></td></tr></table></figure><p>重启电脑再打开 Xdroid，恢复如初。。</p><details><summary>详细展开</summary><div class="fold-content"><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">❯ sudo dkms uninstall deepin-anything/0.0</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">-------- Uninstall Beginning --------</span><br><span class="line"></span><br><span class="line">Module:  deepin-anything</span><br><span class="line"></span><br><span class="line">Version: 0.0</span><br><span class="line"></span><br><span class="line">Kernel:  5.10.5-amd64-desktop+ (x86_64)</span><br><span class="line"></span><br><span class="line">-------------------------------------</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">Status: Before uninstall, this module version was ACTIVE on this kernel.</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">vfs_monitor.ko:</span><br><span class="line"></span><br><span class="line"> - Uninstallation</span><br><span class="line"></span><br><span class="line">   - Deleting from: /lib/modules/5.10.5-amd64-desktop+/updates//</span><br><span class="line"></span><br><span class="line"><span class="built_in">rmdir</span>: 删除 <span class="string">&#x27;updates/&#x27;</span> 失败: 目录非空</span><br><span class="line"></span><br><span class="line"> - Original module</span><br><span class="line"></span><br><span class="line">   - No original module was found <span class="keyword">for</span> this module on this kernel.</span><br><span class="line"></span><br><span class="line">   - Use the dkms install <span class="built_in">command</span> to reinstall any previous module version.</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">depmod...</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">DKMS: uninstall completed.</span><br></pre></td></tr></table></figure></div></details><h4 id="VirtualBox-报错-1908">VirtualBox 报错 1908</h4><p>冒冒失失地更新了 5.11 内核，结果 VirtualBox 无法启动虚拟机。</p><p><img src="https://cdn.jsdelivr.net/gh/forliuyifei/img@mater/img/2021/02/1614132530079.webp" alt="IMG_20210224_100840"></p><p><strong>Deepin 回退内核版本：</strong></p><p>重启，在启动菜单里面选择高级选项，可以看到已安装的所有内核。</p><p>选用旧内核启动，运行 VirtualBox，确认正常使用，然后卸载新内核。</p><figure class="highlight apache"><table><tr><td class="code"><pre><span class="line"><span class="attribute">dpkg</span> --get-selections|grep linux #查看已安装内核</span><br><span class="line"><span class="attribute">sudo</span> apt-get purge linux-headers-<span class="number">5</span>.<span class="number">11</span>.<span class="number">0</span>-xanmod1</span><br><span class="line"><span class="attribute">sudo</span> apt-get purge linux-image-<span class="number">5</span>.<span class="number">11</span>.<span class="number">0</span>-xanmod1</span><br></pre></td></tr></table></figure><p><em>可不敢乱升级了。</em></p><hr><p>看英文搜索结果找到这条</p><blockquote><p><em><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.virtualbox.org/ticket/20193">I fixed this bug by simply adding <code>#include &lt;linux/ethtool.h&gt;</code> to VirtualBox/src/vboxhost/vboxnetflt/linux/VBoxNetFlt-linux.c in VBox v6.1.18 installation.</a></em></p></blockquote><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">sudo micro <span class="regexp">/usr/</span>share<span class="regexp">/virtualbox/</span>src<span class="regexp">/vboxhost/</span>vboxnetflt<span class="regexp">/linux/</span>VBoxNetFlt-linux.c</span><br></pre></td></tr></table></figure><p>在 40 行左右加上 <code>#include &lt;linux/ethtool.h&gt;</code></p><p>最后运行</p><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line">$ sudo /sbin/vboxconfig</span><br><span class="line"><span class="symbol">vboxdrv.sh:</span> Stopping VirtualBox services.</span><br><span class="line"><span class="symbol">vboxdrv.sh:</span> Starting VirtualBox services.</span><br><span class="line"><span class="symbol">vboxdrv.sh:</span> Building VirtualBox kernel modules.</span><br></pre></td></tr></table></figure><p>再打开 vbox 运行虚拟机系统试试，它已经能在 5.11 内核正常工作了。（不明白它的更新为什么如此不智能）</p><h4 id="CPU-调度快速切换">CPU 调度快速切换</h4><p><em>Deepin 系统控制中心自带的性能模式切换似乎看不见效果。</em></p><p>偶尔有不插电的情况，给 CPU 适当降频以提升续航能力。</p><p>使用这个 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://bbs.deepin.org/zh/post/193489">CPU频率调节器（CPUPowerGUI）可以减少笔记本发热、延长电池使用...</a>，查看自己电脑 CPU 支持哪些调度。</p><p>再参考这篇 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.cnblogs.com/hellokitty2/p/13873874.html">CPU governor调节器汇总</a> 对几个名称稍作了解。</p><p>查看当前 CPU 调度</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">cat <span class="regexp">/sys/</span>devices<span class="regexp">/system/</span>cpu<span class="regexp">/cpu*/</span>cpufreq/scaling_governor</span><br></pre></td></tr></table></figure><p>我这里默认输出 8 个 performance。</p><p>变更为 powersave</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">echo powersave | sudo tee <span class="regexp">/sys/</span>devices<span class="regexp">/system/</span>cpu<span class="regexp">/cpu*/</span>cpufreq/scaling_governor</span><br></pre></td></tr></table></figure><p>重新查看当前 CPU 调度</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">cat <span class="regexp">/sys/</span>devices<span class="regexp">/system/</span>cpu<span class="regexp">/cpu*/</span>cpufreq/scaling_governor</span><br></pre></td></tr></table></figure><p>改回 performance</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">echo performance | sudo tee <span class="regexp">/sys/</span>devices<span class="regexp">/system/</span>cpu<span class="regexp">/cpu*/</span>cpufreq/scaling_governor</span><br></pre></td></tr></table></figure><p>以此类推。</p><p>为方便以后切换，将以下内容添进 <code>~/.zshrc</code></p><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="keyword">alias</span> cpu-powersave=&#x27;<span class="keyword">echo</span> powersave | sudo tee <span class="string">/sys/devices/system/cpu/cpu</span>*<span class="string">/cpufreq/scaling_governor</span>&#x27;</span><br><span class="line"><span class="keyword">alias</span> cpu-performance=&#x27;<span class="keyword">echo</span> performance | sudo tee <span class="string">/sys/devices/system/cpu/cpu</span>*<span class="string">/cpufreq/scaling_governor</span>&#x27;</span><br></pre></td></tr></table></figure><p>以后随时用 <code>cpu-powersave</code> 和 <code>cpu-performance</code> 进行切换。</p><p>顺便记一条踩坑</p><figure class="highlight gradle"><table><tr><td class="code"><pre><span class="line"> π ~ ❯ sudo echo battery &gt; <span class="regexp">/sys/</span><span class="keyword">class</span><span class="regexp">/drm/</span>card0<span class="regexp">/device/</span>power_dpm_state</span><br><span class="line">zsh: 权限不够: <span class="regexp">/sys/</span><span class="keyword">class</span><span class="regexp">/drm/</span>card0<span class="regexp">/device/</span>power_dpm_state</span><br></pre></td></tr></table></figure><p>正确用法同上。但奇怪的是，即使手动改成 battery 模式，它也会自动恢复成 performance 模式。</p><figure class="highlight angelscript"><table><tr><td class="code"><pre><span class="line"> π ~ ❯ cat /sys/<span class="keyword">class</span>/<span class="symbol">drm</span>/<span class="symbol">card0</span>/<span class="symbol">device</span>/<span class="symbol">power_dpm_state</span>                                                     </span><br><span class="line"><span class="symbol">performance</span></span><br><span class="line"> π ~ ❯ <span class="symbol">echo</span> <span class="symbol">battery</span> | <span class="symbol">sudo</span> <span class="symbol">tee</span> /<span class="symbol">sys</span>/<span class="symbol">class</span>/<span class="symbol">drm</span>/<span class="symbol">card0</span>/<span class="symbol">device</span>/<span class="symbol">power_dpm_state</span></span><br><span class="line"><span class="symbol">battery</span></span><br><span class="line"> π ~ ❯ <span class="symbol">cat</span> /<span class="symbol">sys</span>/<span class="symbol">class</span>/<span class="symbol">drm</span>/<span class="symbol">card0</span>/<span class="symbol">device</span>/<span class="symbol">power_dpm_state</span>                    </span><br><span class="line"><span class="symbol">performance</span></span><br></pre></td></tr></table></figure><p><em>或许是 Deepin 的 bug 😢</em></p><p>TLP</p><p><code>sudo apt install tlp</code></p><p><code>sudo deepin-editor /etc/default/tlp</code> 调整电源配置</p><p>有空琢磨一下怎么让风扇不那么吵。</p><h4 id="添加人脸识别解锁-howdy"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/boltgolt/howdy/releases">添加人脸识别解锁 howdy</a></h4><p>“我才不要输密码！”</p><blockquote><p><em>让你的 Linux 桌面发行版也能拥有近似 Windows Hello 的体验。</em></p></blockquote><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/boltgolt/howdy/releases">下载 deb 包</a></p><figure class="highlight jboss-cli"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cd</span> ~<span class="string">/Downloads</span></span><br><span class="line">sudo dpkg -i *howdy*deb</span><br></pre></td></tr></table></figure><p>不出意外的话会碰到依赖问题，<strong>保证网络通畅</strong> ，满足它。</p><p>安装过程中有三种模式可选：Fast、Balanced、Secure。</p><p>做人还是中庸一点。</p><p>安装好之后不能急着用，要不然妥妥滴报错。</p><p><strong><mark>需要预先手动指定摄像头设备</mark></strong></p><ol><li><p>安装 v4l-utils 。<br><code>sudo apt install v4l-utils</code></p></li><li><p>查看摄像头设备。<br><code>v4l2-ctl --list-devices</code><br>我这电脑有两个摄像头，一个普通的，一个红外，但是列表竟然出现 4 个</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">HP HD Camera: HP HD Camera (usb-<span class="number">0000</span>:<span class="number">04</span>:<span class="number">00.4</span>-<span class="number">2</span>):</span><br><span class="line">     <span class="regexp">/dev/</span>video0</span><br><span class="line">     <span class="regexp">/dev/</span>video1</span><br><span class="line">     <span class="regexp">/dev/</span>video2</span><br><span class="line">     <span class="regexp">/dev/</span>video3</span><br></pre></td></tr></table></figure></li><li><p>手动指定摄像头设备。<br><code>sudo howdy config</code> <em>（相当于 <code>sudo nano /usr/lib/security/howdy/cli/../config.ini</code> ）</em><br>找到 <code>evice_path = /dev/videoX</code>，修改成前面获取的设备路径。<br>挨个尝试后续操作。</p></li><li><p>添加人脸，与当前登录的用户相关联。<br><code>sudo howdy add</code><br>提示输入 label ，随便填。<br>扫描录入成功之后，重开一个窗口，<code>sudo -i</code> ，看它是否能自动识别人脸并且通过验证。<br>重复几次，最终确定 <code>/dev/video2</code> 是红外摄像头，就用它了，晚上不开灯也能解锁。</p></li><li><p>每次人脸识别获取的图像文件及信息都在 <strong><code>/usr/lib/security/howdy/snapshots</code></strong> 文件夹<br>实测成功解锁的时间约为 0.2 秒，而且不仅 sudo 的验证可以自动通过，免输密码进行高权限操作，还可以兼容 Deepin 的锁屏，舒服了。</p></li><li><p><strong>提升成功率。</strong><br>多 add 个不同角度的人脸信息即可。</p></li><li><p><strong>安全性。</strong></p><p><code>sudo howdy config</code></p><p>确保 <code>ignore_ssh = true</code>，禁用 ssh 人脸验证，否则别人远程用你的照片就能解锁。</p><p><code>certainty = 2.8</code> 大概是 Balanced 模式的默认值，如果解锁速度够快，可以适当改小以提升安全系数，不推荐大于 5 。</p><p><code>capture_failed = true</code>，看看谁想偷看你的电脑。</p><p><code>capture_successful = true</code> 改为 false，验证成功就不保留人脸快照了。<em>（除非你借电脑给心上人）</em></p></li></ol><p>其它选项看着改，没什么专业词汇。</p><p><em>至于指纹解锁，在 Windows 的时候就几乎没用过，现在似乎由于缺少驱动，干脆检测不到设备，不管它，解锁方式不需要那么多。</em></p><blockquote><p>补充：有个可以忍受的 bug ，即如果刚开机的第一次解锁用的是 howdy ，解锁之后还要手动输入密钥环密码和 WiFi 密码，WTF ？问过开发者，说是 howdy 没有办法检测到自己是不是在开机登录时被唤出的，也就无法单独针对这一点进行配置，唯一能做的就是，<strong>enable it only for sudo</strong> 。</p></blockquote><blockquote><p>见 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/boltgolt/howdy/issues/503">Option to not allow facial recognition on first login #503</a><br><em>Unfortunately Howdy can't know WHY it's being called, so it's hard to skip first login. However with this wikipage, you could enable it only for sudo, for example.</em></p></blockquote><blockquote><p>再补充：灭屏锁屏之后进行解锁，经常出现输入密码之后，一直在加载解锁过程（动画看起来是这样）。解决方案，故意错输密码，等它显示密码错误，这个时候 howdy 被唤醒，摄像头工作，OK，解锁成功。还有一种骚操作，点击锁屏界面右下角的电源按钮图标🔘，随便点个重启或者关机，<strong>注意头先不要对准摄像头，要不然就真的 重启 / 关机 了</strong>，鼠标<mark>迅速点击</mark>锁屏界面周围空白处，红色的关机按钮或者重启按钮变成蓝色的解锁按钮，再让摄像头扫描自己的脸，over。（文字描述多，实际操作其实很快，总之比输密码方便，又不是不能用.webp ）</p></blockquote><p>强制更新<br><code>sudo pam-auth-update --force</code></p><h4 id="解决-WiFi-叹号">解决 WiFi 叹号</h4><p>此次使用过程中发现 WiFi 老是出现感叹号，瞅了两眼发现系统更新之后，内核竟然还是 5.4 。</p><p>按照社区公告，需要手动更新 5.10 ：</p><figure class="highlight mercury"><table><tr><td class="code"><pre><span class="line">sudo apt install linux-image-deepin-<span class="meta">stable</span>-amd64 linux-headers-deepin-<span class="meta">stable</span>-amd64</span><br></pre></td></tr></table></figure><p>观察一段时间……</p><h3 id="重装-Deepin-记录">重装 Deepin 记录</h3><h4 id="U盘制作启动盘">U盘制作启动盘</h4><p>找到U盘</p><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo fdisk -l</span></span><br></pre></td></tr></table></figure><p>制作启动盘</p><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">dd <span class="attribute">if</span>=xxx.iso（镜像文件路径，可用拖动文件进终端的方式直接获取） <span class="attribute">of</span>=U盘路径（/dev/sd? 小心辨别，谨防误操作）</span><br></pre></td></tr></table></figure><p>U盘预先插在速度快的 USB 3.0 接口，减少等待时间。</p><p>关机，开机狂按F9或者F10</p><p>设置刚刚的U盘为第一启动项目</p><p>进入 Deepin 安装引导</p><h4 id="自定义分区">自定义分区</h4><ul><li>300 M efi 分区</li><li>243896-1024*8=235704 M 全部为 ext4 分区，作为 / 挂载点</li><li>剩下 8192 M 即 8 G 作为 swap 交换分区</li></ul><p><em>不特意分 /home 应该没事；不用 swapfile 。</em></p><p>开始安装……</p><p>按照要求，点击重启，拔出 U 盘</p><h4 id="开机">开机</h4><p>联网，登录帐户。</p><figure class="highlight ebnf"><table><tr><td class="code"><pre><span class="line"><span class="attribute">sudo apt update</span></span><br><span class="line"><span class="attribute">sudo apt upgrade</span></span><br></pre></td></tr></table></figure><p>安装好更新重启一次</p><p>重启之前改下缩放比例，调整至 150%</p><h4 id="全局缩放-1-5-倍">全局缩放 1.5 倍</h4><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">qdbus <span class="attr">--literal</span> com<span class="selector-class">.deepin</span><span class="selector-class">.daemon</span><span class="selector-class">.Appearance</span> /com/deepin/daemon/Appearance com<span class="selector-class">.deepin</span><span class="selector-class">.daemon</span><span class="selector-class">.Appearance</span><span class="selector-class">.SetScaleFactor</span> <span class="number">1.5</span></span><br></pre></td></tr></table></figure><p>老规矩 screenfetch 看看设备信息。</p><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">sudo apt <span class="keyword">install </span><span class="keyword">screenfetch</span></span><br><span class="line"><span class="keyword"></span><span class="keyword">screenfetch</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/forliuyifei/img@mater/img/2021/2/1612949400279.webp" alt="IMG_20210210_172909"></p><h3 id="安装常用软件">安装常用软件</h3><figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">sudo apt install kdeconnect com<span class="selector-class">.sougou</span><span class="selector-class">.sogoupinyin</span> cn<span class="selector-class">.wps</span><span class="selector-class">.wps-office</span> io<span class="selector-class">.typora</span> com.<span class="number">163</span><span class="selector-class">.music</span> mpv smplayer com<span class="selector-class">.qq</span><span class="selector-class">.weixin</span><span class="selector-class">.deepin</span> com<span class="selector-class">.jianguoyun</span> rclone rclone-browser timeshift org<span class="selector-class">.qbittorrent</span><span class="selector-class">.qbittorrent</span> org<span class="selector-class">.filezilla</span> gimp krita</span><br></pre></td></tr></table></figure><p>等待期间，QQ邮箱生成授权码，用深度邮箱进行登录；坚果云同步搞起。</p><p>还没下载好？</p><p>打开 <a target="_blank" rel="noopener external nofollow noreferrer" href="http://bbs.deepin.org">bbs.deepin.org</a>，看看有什么新玩意儿。</p><h4 id="安装基本工具">安装基本工具</h4><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">sudo apt install git curl npm nodejs <span class="keyword">python</span> <span class="keyword">python</span>-pip <span class="keyword">python3</span>-venv <span class="keyword">python3</span>-pip aria2</span><br></pre></td></tr></table></figure><h4 id="Firefox-浏览器">Firefox 浏览器</h4><p>下载 Firefox 官方原版压缩包，（以及将来的类似应用）统一解压至 ~/Applications</p><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://blog.csdn.net/qq_40738077/article/details/105397514">Firefox使用Chrome主题</a></p><h4 id="桌面快捷方式编辑器"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://gitee.com/deepin-opensource/desktop-entry-editor/releases">桌面快捷方式编辑器</a></h4><h4 id="micro-编辑器">micro 编辑器</h4><p><s>不知道比 vim 、nano 高到哪里去了。</s></p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">curl https:<span class="regexp">//g</span>etmic.ro | bash</span><br><span class="line">sudo apt install xclip</span><br></pre></td></tr></table></figure><p>发现还是找不到 micro 命令</p><p>原来它把二进制文件直接放在 ~/micro<br><code>./micro</code> 可用</p><p>那就</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">cp ~<span class="regexp">/micro ~/</span>.local<span class="regexp">/bin/mi</span>cro</span><br></pre></td></tr></table></figure><p>.bashrc 以及后来的 .zshrc 添加</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">export PATH=<span class="regexp">/home/u</span>sername<span class="regexp">/.local/</span>bin:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><h4 id="安装-VBox-虚拟机">安装 VBox 虚拟机</h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.virtualbox.org/">https://www.virtualbox.org/</a><br>下载deb包<br>进入下载目录<br>sudo dpkg -i <em>virtualbox</em>.deb</p><p>问题有点多，直接贴出记录：</p><details><summary>点击展开</summary><div class="fold-content"><figure class="highlight subunit"><table><tr><td class="code"><pre><span class="line">username@HP<span class="string">-735</span>G5-Deepin:/media/username/娱乐/Deepin/Deb$ sudo dpkg -i *virtualbox*.deb</span><br><span class="line">请输入密码</span><br><span class="line">[sudo] username 的密码：</span><br><span class="line">验证成功</span><br><span class="line">正在选中未选择的软件包 virtualbox<span class="string">-6</span>.1。</span><br><span class="line">(正在读取数据库 ... 系统当前共安装有 246270 个文件和目录。)</span><br><span class="line">准备解压 virtualbox<span class="string">-6</span>.1_6.1.18<span class="string">-142142</span>~Debian~jessie_amd64.deb  ...</span><br><span class="line">正在解压 virtualbox<span class="string">-6</span>.1 (6.1.18<span class="string">-142142</span>~Debian~jessie) ...</span><br><span class="line">dpkg: 依赖关系问题使得 virtualbox<span class="string">-6</span>.1 的配置工作不能继续：</span><br><span class="line"> virtualbox<span class="string">-6</span>.1 依赖于 libcurl3 (&gt;= 7.16.2)；然而：</span><br><span class="line">  未安装软件包 libcurl3。</span><br><span class="line"> virtualbox<span class="string">-6</span>.1 依赖于 libssl1.0.0 (&gt;= 1.0.1)；然而：</span><br><span class="line">  未安装软件包 libssl1.0.0。</span><br><span class="line"> virtualbox<span class="string">-6</span>.1 依赖于 libvpx1 (&gt;= 1.0.0)；然而：</span><br><span class="line">  未安装软件包 libvpx1。</span><br><span class="line"></span><br><span class="line">dpkg: 处理软件包 virtualbox<span class="string">-6</span>.1 (--install)时出错：</span><br><span class="line"> 依赖关系问题 - 仍未被配置</span><br><span class="line">正在处理用于 systemd (241.8.1<span class="string">-6</span>+dde) 的触发器 ...</span><br><span class="line">正在处理用于 hicolor-icon-theme (0.17<span class="string">-2</span>) 的触发器 ...</span><br><span class="line">正在处理用于 shared-mime-info (1.10.1<span class="string">-1</span>+eagle) 的触发器 ...</span><br><span class="line">正在处理用于 lastore-daemon (5.1.30.1<span class="string">-1</span>) 的触发器 ...</span><br><span class="line">正在处理用于 bamfdaemon (0.5.4.1<span class="string">-1</span>+eagle) 的触发器 ...</span><br><span class="line">Rebuilding /usr/share/applications/bamf<span class="string">-2</span>.index...</span><br><span class="line">正在处理用于 desktop-file-utils (0.23<span class="string">-4</span>) 的触发器 ...</span><br><span class="line">正在处理用于 mime-support (3.62) 的触发器 ...</span><br><span class="line">在处理时有错误发生：</span><br><span class="line"> virtualbox<span class="string">-6</span>.1</span><br><span class="line">username@HP<span class="string">-735</span>G5-Deepin:/media/username/娱乐/Deepin/Deb$ sudo apt install libcurl3 libssl1.0.0 libvpx1</span><br><span class="line">正在读取软件包列表... 完成</span><br><span class="line">正在分析软件包的依赖关系树       </span><br><span class="line">正在读取状态信息... 完成       </span><br><span class="line">没有可用的软件包 libcurl3，但是它被其它的软件包引用了。</span><br><span class="line">这可能意味着这个缺失的软件包可能已被废弃，</span><br><span class="line">或者只能在其他发布源中找到</span><br><span class="line">然而下列软件包会取代它：</span><br><span class="line">  libcurl4:i386 libcurl4</span><br><span class="line"></span><br><span class="line">没有可用的软件包 libssl1.0.0，但是它被其它的软件包引用了。</span><br><span class="line">这可能意味着这个缺失的软件包可能已被废弃，</span><br><span class="line">或者只能在其他发布源中找到</span><br><span class="line"></span><br><span class="line">没有可用的软件包 libvpx1，但是它被其它的软件包引用了。</span><br><span class="line">这可能意味着这个缺失的软件包可能已被废弃，</span><br><span class="line">或者只能在其他发布源中找到</span><br><span class="line"></span><br><span class="line">E: 软件包 libcurl3 没有可安装候选</span><br><span class="line">E: 软件包 libssl1.0.0 没有可安装候选</span><br><span class="line">E: 软件包 libvpx1 没有可安装候选</span><br><span class="line">username@HP<span class="string">-735</span>G5-Deepin:/media/username/娱乐/Deepin/Deb$ sudo apt install libcurl4:i386 libcurl4 libssl1.0.0 libvpx1</span><br><span class="line">正在读取软件包列表... 完成</span><br><span class="line">正在分析软件包的依赖关系树       </span><br><span class="line">正在读取状态信息... 完成       </span><br><span class="line">没有可用的软件包 libssl1.0.0，但是它被其它的软件包引用了。</span><br><span class="line">这可能意味着这个缺失的软件包可能已被废弃，</span><br><span class="line">或者只能在其他发布源中找到</span><br><span class="line"></span><br><span class="line">没有可用的软件包 libvpx1，但是它被其它的软件包引用了。</span><br><span class="line">这可能意味着这个缺失的软件包可能已被废弃，</span><br><span class="line">或者只能在其他发布源中找到</span><br><span class="line"></span><br><span class="line">E: 软件包 libssl1.0.0 没有可安装候选</span><br><span class="line">E: 软件包 libvpx1 没有可安装候选</span><br><span class="line">username@HP<span class="string">-735</span>G5-Deepin:/media/username/娱乐/Deepin/Deb$ sudo apt install libcurl4:i386 libcurl4</span><br><span class="line">正在读取软件包列表... 完成</span><br><span class="line">正在分析软件包的依赖关系树       </span><br><span class="line">正在读取状态信息... 完成       </span><br><span class="line">libcurl4 已经是最新版 (7.64.0<span class="string">-4</span>+deb10u1)。</span><br><span class="line">libcurl4 已设置为手动安装。</span><br><span class="line">您也许需要运行“apt --fix-broken install”来修正上面的错误。</span><br><span class="line">下列软件包有未满足的依赖关系：</span><br><span class="line"> libcurl4:i386 : 依赖: libnghttp2<span class="string">-14</span>:i386 (&gt;= 1.12.0) 但是它将不会被安装</span><br><span class="line">                 依�������: libpsl5:i386 (&gt;= 0.16.0) 但是它将不会被安装</span><br><span class="line">                 依赖: librtmp1:i386 (&gt;= 2.4<span class="string">+20131018</span>.git79459a2<span class="string">-3</span>~) 但是它将不会被安装</span><br><span class="line">                 依赖: libssh2<span class="string">-1</span>:i386 (&gt;= 1.7.0) 但是它将不会被安装</span><br><span class="line"> virtualbox<span class="string">-6</span>.1 : 依赖: libcurl3 (&gt;= 7.16.2) 但无法安装它</span><br><span class="line">                  依赖: libssl1.0.0 (&gt;= 1.0.1) 但无法安装它</span><br><span class="line">                  依赖: libvpx1 (&gt;= 1.0.0) 但无法安装它</span><br><span class="line">                  推荐: libsdl-ttf2.0<span class="string">-0</span> 但是它将不会被安装</span><br><span class="line">                  推荐: linux-headers-generic 但无法安装它 或</span><br><span class="line">                          linux-headers-generic-pae 但无法安装它 或</span><br><span class="line">                          linux-headers<span class="string">-686</span>-pae 但无法安装它 或</span><br><span class="line">                          linux-headers-amd64 但是它将不会被安装 或</span><br><span class="line">                          linux-headers<span class="string">-2</span>.6<span class="string">-686</span> 但无法安装它 或</span><br><span class="line">                          linux-headers<span class="string">-2</span>.6-amd64 但无法安装它 或</span><br><span class="line">                          linux-headers</span><br><span class="line">                  推荐: linux-image</span><br><span class="line">                  推荐: pdf-viewer</span><br><span class="line">E: 有未能满足的依赖关系。请尝试不指明软件包的名字来运行“apt --fix-broken install”(也可以指定一个解决办法)。</span><br><span class="line">username@HP<span class="string">-735</span>G5-Deepin:/media/username/娱乐/Deepin/Deb$ apt --fix-broken install</span><br><span class="line">E: 无法打开锁文件 /var/lib/dpkg/lock-frontend - open (13: 权限不够)</span><br><span class="line">E: 无法获取 dpkg 前端锁 (/var/lib/dpkg/lock-frontend)，请查看您是否正以 root 用户运行？</span><br><span class="line">username@HP<span class="string">-735</span>G5-Deepin:/media/username/娱乐/Deepin/Deb$ sudo apt --fix-broken install</span><br><span class="line">正在读取软件包列表... 完成</span><br><span class="line">正在分析软件包的依赖关系树       </span><br><span class="line">正在读取状态信息... 完成       </span><br><span class="line">正在修复依赖关系... 完成</span><br><span class="line">下列软件包是自动安装的并且现在不需要了：</span><br><span class="line">  fbterm imageworsener libatkmm<span class="string">-1</span>.6<span class="string">-1</span>v5 libcairomm<span class="string">-1</span>.0<span class="string">-1</span>v5 libdumbnet1 libgtkmm<span class="string">-3</span>.0<span class="string">-1</span>v5 liblqr<span class="string">-1</span><span class="string">-0</span></span><br><span class="line">  libmaxminddb0 libmspack0 libnatspec0 libpangomm<span class="string">-1</span>.4<span class="string">-1</span>v5 libqtermwidget5<span class="string">-0</span> libsmi2ldbl libutempter0</span><br><span class="line">  libutf8proc2 libwireshark-data libwireshark11 libwiretap8 libwscodecs2 libwsutil9 libx86<span class="string">-1</span></span><br><span class="line">  libxmlsec1-openssl live-system-com qtermwidget5-data squashfs-tools x11-apps x11-session-utils xbitmaps</span><br><span class="line">  xinit</span><br><span class="line">使用&#x27;sudo apt autoremove&#x27;来卸载它(它们)。</span><br><span class="line">将会同时安装下列软件：</span><br><span class="line">  virtualbox<span class="string">-6</span>.1</span><br><span class="line">推荐安装：</span><br><span class="line">  libsdl-ttf2.0<span class="string">-0</span></span><br><span class="line">下列软件包将被升级：</span><br><span class="line">  virtualbox<span class="string">-6</span>.1</span><br><span class="line">升级了 1 个软件包，新安装了 0 个软件包，要卸载 0 个软件包，有 1 个软件包未被升级。</span><br><span class="line">有 1 个软件包没有被完全安装或卸载。</span><br><span class="line">需要下载 88.3 MB 的归档。</span><br><span class="line">解压缩后将会空出 14.9 MB 的空间。</span><br><span class="line">您希望继续执行吗？ [Y/n] y</span><br><span class="line">获取:1 https://community-packages.deepin.com/deepin apricot/contrib amd64 virtualbox<span class="string">-6</span>.1 amd64 6.1.18<span class="string">-142143</span>~Debian~buster [88.3 MB]</span><br><span class="line">已下载 88.3 MB，耗时 38秒 (2,343 kB/s)                                                                       </span><br><span class="line">正在预设定软件包 ...</span><br><span class="line">(正在读取数据库 ... 系统当前共安装有 247033 个文件和目录。)</span><br><span class="line">准备解压 .../virtualbox<span class="string">-6</span>.1_6.1.18<span class="string">-142143</span>~Debian~buster_amd64.deb  ...</span><br><span class="line">正在解压 virtualbox<span class="string">-6</span>.1 (6.1.18<span class="string">-142143</span>~Debian~buster) 并覆盖 (6.1.18<span class="string">-142142</span>~Debian~jessie) ...</span><br><span class="line">正在设置 virtualbox<span class="string">-6</span>.1 (6.1.18<span class="string">-142143</span>~Debian~buster) ...</span><br><span class="line">正在添加组&quot;vboxusers&quot; (GID 130)...</span><br><span class="line">完成。</span><br><span class="line">正在处理用于 desktop-file-utils (0.23<span class="string">-4</span>) 的触发器 ...</span><br><span class="line">正在处理用于 mime-support (3.62) 的触发器 ...</span><br><span class="line">正在处理用于 hicolor-icon-theme (0.17<span class="string">-2</span>) 的触发器 ...</span><br><span class="line">正在处理用于 lastore-daemon (5.1.30.1<span class="string">-1</span>) 的触发器 ...</span><br><span class="line">正在处理用于 systemd (241.8.1<span class="string">-6</span>+dde) 的触发器 ...</span><br><span class="line">正在处理用于 shared-mime-info (1.10.1<span class="string">-1</span>+eagle) 的触发器 ...</span><br><span class="line">正在处理用于 bamfdaemon (0.5.4.1<span class="string">-1</span>+eagle) 的触发器 ...</span><br><span class="line">Rebuilding /usr/share/applications/bamf<span class="string">-2</span>.index...</span><br></pre></td></tr></table></figure></div></details><p>VirtualBox 安装 Windows 太简单，略。</p><h4 id="DDE-任务栏-CPU、流量监控">DDE 任务栏 CPU、流量监控</h4><p>可以说是 Linux 下的 Traffic Monitor，甚至更漂亮。</p><p>随便找个目录下载源码</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/q77190858/</span>dde-sys-monitor-plugin</span><br></pre></td></tr></table></figure><p>安装编译依赖</p><figure class="highlight mipsasm"><table><tr><td class="code"><pre><span class="line">sudo apt <span class="keyword">install </span><span class="keyword">build-essential</span></span><br><span class="line"><span class="keyword"></span>sudo apt <span class="keyword">install </span>dde-dock-dev</span><br><span class="line">sudo apt <span class="keyword">install </span>qtbase5-dev-tools</span><br><span class="line">sudo apt <span class="keyword">install </span>libdtkwidget-dev</span><br><span class="line">sudo apt <span class="keyword">install </span>qtcreator <span class="comment">#非必要</span></span><br><span class="line">sudo apt <span class="keyword">install </span>cmake</span><br></pre></td></tr></table></figure><p>一键编译安装</p><figure class="highlight stata"><table><tr><td class="code"><pre><span class="line"><span class="keyword">cd</span> dde-sys-monitor-<span class="keyword">plugin</span></span><br><span class="line">./build.<span class="keyword">sh</span></span><br></pre></td></tr></table></figure><h4 id="wine5-应用的分辨率修改">wine5 应用的分辨率修改</h4><p><code>env WINEPREFIX=&quot;$HOME/.deepinwine/Deepin-WeChat&quot; deepin-wine5 winecfg</code><br>发现没有命令，需要安装<br><code>sudo apt install deepin-wine5</code></p><h4 id="游戏">游戏</h4><p>装个 steam</p><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> steam</span><br></pre></td></tr></table></figure><p>Terraria 很流畅。</p><h3 id="ssh-相关">ssh 相关</h3><p>之前的 ssh 配置丢了，重新生成一次</p><figure class="highlight arcade"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -f ~<span class="regexp">/.ssh/i</span>d_rsa.Deepin -C <span class="string">&quot;735-G5-Deepin&quot;</span></span><br></pre></td></tr></table></figure><p>一路回车</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.ssh</span><br><span class="line"><span class="built_in">ls</span></span><br><span class="line"><span class="built_in">cat</span> id_rsa.Deepin.pub</span><br></pre></td></tr></table></figure><p>打开<br><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/settings/keys">https://github.com/settings/keys</a></p><p>添加公钥</p><p>还是上面的目录下 <code>micro config</code></p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line"><span class="comment"># github</span></span><br><span class="line">Host *github.com</span><br><span class="line">  PreferredAuthentications publickey</span><br><span class="line">  IdentityFile ~<span class="regexp">/.ssh/i</span>d_rsa.Deepin</span><br></pre></td></tr></table></figure><p><code>ssh -T git@github.com</code> 测试是否通过验证。</p><p>coding、gitee、gitlab 同理。</p><p>干脆给手机也来一份<br>把公钥添加进手机的 ~/.ssh/authorized_keys<br><code>whoami</code> 和 <code>ifconfig</code> 查看用户名和 ip<br>电脑 ssh <a href="mailto:u0_a266@192.168.1.101" rel="external nofollow noreferrer">u0_a266@192.168.1.101</a> -p 8022，开始控制手机愉快玩耍。</p><p>内网穿透略。</p><h4 id="恢复博客搭建环境">恢复博客搭建环境</h4><p>git clone 把博客源码拉回本地。</p><p>进入目录 npm install hexo-cli -g<br>报错：</p><details><summary>点击展开</summary><div class="fold-content"><figure class="highlight stata"><table><tr><td class="code"><pre><span class="line">$  npm install hexo-<span class="keyword">cli</span> -<span class="keyword">g</span> </span><br><span class="line">npm WARN npm npm does not support Node.js v10.21.0</span><br><span class="line">npm WARN npm You should probably upgrade to a newer <span class="keyword">version</span> of node <span class="keyword">as</span> we</span><br><span class="line">npm WARN npm can&#x27;t make any promises that npm will work with this <span class="keyword">version</span>.</span><br><span class="line">npm WARN npm Supported releases of Node.js are the latest release of 4, 6, 7, 8, 9.</span><br><span class="line">npm WARN npm You can find the latest <span class="keyword">version</span> at https:<span class="comment">//nodejs.org/</span></span><br><span class="line">npm WARN checkPermissions Missing write access to /usr/<span class="keyword">local</span>/lib</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@~2.3.1 (node_modules/hexo-<span class="keyword">cli</span>/node_modules/chokidar/node_modules/fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform <span class="keyword">for</span> fsevents@2.3.2: wanted &#123;<span class="string">&quot;os&quot;</span>:<span class="string">&quot;darwin&quot;</span>,<span class="string">&quot;arch&quot;</span>:<span class="string">&quot;any&quot;</span>&#125; (current: &#123;<span class="string">&quot;os&quot;</span>:<span class="string">&quot;linux&quot;</span>,<span class="string">&quot;arch&quot;</span>:<span class="string">&quot;x64&quot;</span>&#125;)</span><br><span class="line"></span><br><span class="line">npm <span class="keyword">ERR</span>! path /usr/<span class="keyword">local</span>/lib</span><br><span class="line">npm <span class="keyword">ERR</span>! code EACCES</span><br><span class="line">npm <span class="keyword">ERR</span>! errno -13</span><br><span class="line">npm <span class="keyword">ERR</span>! syscall access</span><br><span class="line">npm <span class="keyword">ERR</span>! <span class="keyword">Error</span>: EACCES: permission denied, access &#x27;/usr/<span class="keyword">local</span>/lib&#x27;</span><br><span class="line">npm <span class="keyword">ERR</span>!  &#123; [<span class="keyword">Error</span>: EACCES: permission denied, access &#x27;/usr/<span class="keyword">local</span>/lib&#x27;]</span><br><span class="line">npm <span class="keyword">ERR</span>!   <span class="keyword">stack</span>:</span><br><span class="line">npm <span class="keyword">ERR</span>!    &#x27;<span class="keyword">Error</span>: EACCES: permission denied, access \&#x27;/usr/<span class="keyword">local</span>/lib\&#x27;&#x27;,</span><br><span class="line">npm <span class="keyword">ERR</span>!   errno: -13,</span><br><span class="line">npm <span class="keyword">ERR</span>!   code: &#x27;EACCES&#x27;,</span><br><span class="line">npm <span class="keyword">ERR</span>!   syscall: &#x27;access&#x27;,</span><br><span class="line">npm <span class="keyword">ERR</span>!   path: &#x27;/usr/<span class="keyword">local</span>/lib&#x27; &#125;</span><br><span class="line">npm <span class="keyword">ERR</span>! </span><br><span class="line">npm <span class="keyword">ERR</span>! The operation was rejected <span class="keyword">by</span> your operating system.</span><br><span class="line">npm <span class="keyword">ERR</span>! It is likely you <span class="keyword">do</span> not have the permissions to access this <span class="keyword">file</span> <span class="keyword">as</span> the current user</span><br><span class="line">npm <span class="keyword">ERR</span>! </span><br><span class="line">npm <span class="keyword">ERR</span>! <span class="keyword">If</span> you believe this might be a permissions issue, please double-check the</span><br><span class="line">npm <span class="keyword">ERR</span>! permissions of the <span class="keyword">file</span> and its containing directories, or try running</span><br><span class="line">npm <span class="keyword">ERR</span>! the command again <span class="keyword">as</span> root/Administrator (though this is not recommended).</span><br></pre></td></tr></table></figure></div></details><p>版本太老？</p><p>npm 修改淘宝源，安装 n 模块</p><figure class="highlight gams"><table><tr><td class="code"><pre><span class="line">sudo npm config <span class="keyword">set</span> registry <span class="comment">https:</span>//<span class="comment">registry.npm.taobao.org</span></span><br><span class="line">sudo <span class="comment">npm config list</span></span><br><span class="line">sudo <span class="comment">npm install n -g</span></span><br></pre></td></tr></table></figure><p>安装最新的 nodejs（stable版本）</p><figure class="highlight crmsh"><table><tr><td class="code"><pre><span class="line">sudo n stable</span><br><span class="line">sudo <span class="keyword">node</span> <span class="title">-v</span></span><br><span class="line">sudo npm -v</span><br></pre></td></tr></table></figure><p>重新</p><figure class="highlight avrasm"><table><tr><td class="code"><pre><span class="line">sudo npm install hexo-<span class="keyword">cli</span> -g</span><br><span class="line">hexo -v</span><br></pre></td></tr></table></figure><h4 id="GIT-中文乱码">GIT 中文乱码</h4><p><code>micro .gitconfig</code> 添加：</p><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="section">[gui]</span></span><br><span class="line">    <span class="attr">encoding</span> = utf-<span class="number">8</span>  </span><br><span class="line">    <span class="comment"># 代码库统一使用utf-8  </span></span><br><span class="line"><span class="section">[i18n]</span></span><br><span class="line">    <span class="attr">commitencoding</span> = utf-<span class="number">8</span>  </span><br><span class="line">    <span class="comment"># log编码  </span></span><br><span class="line"><span class="section">[svn]</span></span><br><span class="line">    <span class="attr">pathnameencoding</span> = utf-<span class="number">8</span>  </span><br><span class="line">    <span class="comment"># 支持中文路径  </span></span><br><span class="line"><span class="section">[core]</span></span><br><span class="line">	<span class="attr">quotepath</span> = <span class="literal">false</span> </span><br><span class="line">	<span class="comment"># status引用路径不再是八进制（反过来说就是允许显示中文）</span></span><br></pre></td></tr></table></figure><h3 id="安装-zsh-和-oh-my-zsh">安装 zsh 和 oh my zsh</h3><p><code>sudo apt-get install zsh -y</code></p><p>安装 oh-my-zsh 的脚本</p><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">$ <span class="keyword">sh</span> -<span class="keyword">c</span> <span class="string">&quot;$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)&quot;</span></span><br><span class="line">--<span class="number">2021</span>-<span class="number">02</span>-<span class="number">10</span> <span class="number">13</span>:<span class="number">24</span>:<span class="number">13</span>--  https://raw.github.<span class="keyword">com</span>/robbyrussell/oh-my-zsh/master/tools/install.<span class="keyword">sh</span></span><br><span class="line">正在解析主机 raw.github.<span class="keyword">com</span> (raw.github.<span class="keyword">com</span>)... <span class="number">151.101</span>.<span class="number">76.133</span></span><br><span class="line">正在连接 raw.github.<span class="keyword">com</span> (raw.github.<span class="keyword">com</span>)|<span class="number">151.101</span>.<span class="number">76.133</span>|:<span class="number">443</span>... 已连接。</span><br><span class="line">GnuTLS: Error in the pull <span class="keyword">function</span>.</span><br><span class="line">无法建立 SSL 连接。</span><br></pre></td></tr></table></figure><p>万恶的 443</p><h4 id="解决-Github-网络问题">解决 Github 网络问题</h4><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.ipaddress.com/">https://www.ipaddress.com/</a><br>得到真实 ip</p><p><code>sudo micro /etc/hosts</code></p><p>添加</p><figure class="highlight accesslog"><table><tr><td class="code"><pre><span class="line"><span class="number">199.232.96.133</span> raw.github.com</span><br><span class="line"><span class="number">199.232.96.133</span> raw.githubusercontent.com</span><br></pre></td></tr></table></figure><p>保存</p><p>重新运行上面的脚本，将 zsh 设置为默认 shell</p><p>安装 <a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/tobyjamesthomas/pi">pi 主题</a></p><p>wget -O ~/.oh-my-zsh/themes/pi.zsh-theme <a target="_blank" rel="noopener external nofollow noreferrer" href="https://raw.githubusercontent.com/tobyjamesthomas/pi/master/pi.zsh-theme">https://raw.githubusercontent.com/tobyjamesthomas/pi/master/pi.zsh-theme</a></p><p>修改 .zshrc</p><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">ZSH_THEME</span>=<span class="string">&quot;pi&quot;</span></span><br></pre></td></tr></table></figure><h4 id="自动补全、命令高亮、快速跳转目录、纠错插件">自动补全、命令高亮、快速跳转目录、纠错插件</h4><p>安装：</p><ol><li><p>zsh-autosuggestions</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/zsh-users/</span>zsh-autosuggestions <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span><span class="regexp">/plugins/</span>zsh-autosuggestions</span><br></pre></td></tr></table></figure></li><li><p>zsh-syntax-highlighting</p><figure class="highlight awk"><table><tr><td class="code"><pre><span class="line">git clone https:<span class="regexp">//gi</span>thub.com<span class="regexp">/zsh-users/</span>zsh-syntax-highlighting.git <span class="variable">$&#123;ZSH_CUSTOM:-~/.oh-my-zsh/custom&#125;</span><span class="regexp">/plugins/</span>zsh-syntax-highlighting</span><br></pre></td></tr></table></figure></li><li><p>autojump</p><figure class="highlight routeros"><table><tr><td class="code"><pre><span class="line">sudo apt-<span class="built_in">get</span> install autojump</span><br></pre></td></tr></table></figure><p>跳转目录，例如 <code>j do</code>、<code>j d</code> 可以自动跳转至常用的 <code>~/Download</code> 文件夹。</p></li><li><p><a target="_blank" rel="noopener external nofollow noreferrer" href="https://github.com/nvbn/thefuck">thefuck</a></p><figure class="highlight vim"><table><tr><td class="code"><pre><span class="line">sudo apt install <span class="keyword">python3</span>-dev <span class="keyword">python3</span>-pip <span class="keyword">python3</span>-setuptools</span><br><span class="line">sudo pip3 install thefuck</span><br></pre></td></tr></table></figure><p>输错命令的时候来一句 fuck ，自动纠正。</p></li></ol><p><strong><mark>启用：</mark></strong><br>修改 <code>.zshrc</code></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">plugins=(</span><br><span class="line">git</span><br><span class="line">zsh-autosuggestions</span><br><span class="line">zsh-syntax-highlighting</span><br><span class="line">autojump</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="built_in">bindkey</span> <span class="string">&#x27;,&#x27;</span> autosuggest-accept</span><br><span class="line"></span><br><span class="line"><span class="built_in">eval</span> $(thefuck --<span class="built_in">alias</span> FUCK) <span class="comment"># FUCK 可以自定义其它字符。</span></span><br></pre></td></tr></table></figure><h3 id="问候语">问候语</h3><figure class="highlight cmake"><table><tr><td class="code"><pre><span class="line">sudo apt <span class="keyword">install</span> fortune cowsay</span><br></pre></td></tr></table></figure><p>修改 <code>.zshrc</code> 最后加上：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;=============== Quote Of The Day ===============&quot;</span></span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line">fortune | cowsay</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;================================================&quot;</span></span><br><span class="line"><span class="built_in">echo</span></span><br></pre></td></tr></table></figure><h3 id="其它值得折腾的">其它值得折腾的</h3><p><em>还是放前面吧。</em></p><h4 id="投屏">投屏</h4><p>Scrcpy or VNC Viewer？</p><h3 id="参考">参考</h3><ul><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://zc-cris.github.io/archives/7a98167e.html">Deepin 安装和使用 zsh</a></li><li><a target="_blank" rel="noopener external nofollow noreferrer" href="https://www.ruanyifeng.com/blog/2015/04/fortune.html">fortune 命令简介</a></li></ul></div><div class="post__license"><p><strong>本文作者：</strong>青菜芋子</p><p><strong>本文链接： </strong><a href="https://loafing.cn/posts/Hello-Deepin-my-old-friend.html">https://loafing.cn/posts/Hello-Deepin-my-old-friend.html</a></p><strong><p>文章默认采用 <a href="/posts/Creative-Commons-licenses.html#CC-BY-NC-SA-4-0" title="署名-非商业性使用-相同方式共享（商业转载需获得授权，非商业转载请注明出处）">CC BY-NC-SA 4.0 许可协议</a>，如有转载请注意遵循。</p></strong></div><div class="post-footer__meta"><p>最后更新于：2021 五月 4日 , 星期二 , 21:11 晚上</p></div><div class="post-entry__tags"><a href="/tags/Deepin/" class="post-tags__link button"># Deepin</a><a href="/tags/Linux/" class="post-tags__link button"># Linux</a><a href="/tags/%E8%AE%B0%E5%BD%95/" class="post-tags__link button"># 记录</a><a href="/tags/%E6%95%99%E7%A8%8B/" class="post-tags__link button"># 教程</a></div></article><div class="nav"><div class="nav__prev"><a href="/posts/sdcv-dictionary-look-up-on-Deepin.html" class="nav__link"><div><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M589.088 790.624L310.464 512l278.624-278.624 45.248 45.248L400.96 512l233.376 233.376z" fill="#808080"></path></svg></div><div><div class="nav__label">上一篇</div><div class="nav__title">「教程」在Deepin（Linux）下如何优雅地查词典？—— sdcv ⚡📚</div></div></a></div><div class="nav__next"><a href="/posts/Applications-on-Deepin.html" class="nav__link"><div><div class="nav__label">下一篇</div><div class="nav__title">「记录」DeepinOS 自用软件安装及使用一览</div></div><div><svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M434.944 790.624l-45.248-45.248L623.04 512l-233.376-233.376 45.248-45.248L713.568 512z" fill="#808080"></path></svg></div></a></div></div><div class="post__comments post__with-toc content-card" id="comment"><h4>评论</h4><div id="disqusjs">您所在的地区可能无法访问 Disqus 评论系统，请切换网络环境再尝试。</div></div></main><footer class="footer"><a href="#" class="button" id="b2t" aria-label="回到顶部" title="回到顶部"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="32" height="32"><path d="M233.376 722.752L278.624 768 512 534.624 745.376 768l45.248-45.248L512 444.128zM192 352h640V288H192z" fill="currentColor"></path></svg></a><p>© <a href="/posts/Creative-Commons-licenses.html#CC-BY-NC-SA-4-0" title="署名-非商业性使用-相同方式共享（点击链接查看具体介绍）">CC BY-NC-SA 4.0</a> | <a href="mailto:forzqx@qq.com" rel="external nofollow noreferrer">若风</a></p><p>Powered by <a href="https://hexo.io" rel="external nofollow noreferrer" target="_blank">Hexo</a> | Theme - <a href="https://github.com/ChrAlpha/hexo-theme-cards" rel="external nofollow noreferrer" target="_blank">Cards</a></p></footer></div><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-166911229-2","auto"),ga("send","pageview")</script><script async src="https://www.google-analytics.com/analytics.js"></script><script>function loadComment() {
        let e, i;
        (e = document.createElement("script")).src = 'https://cdn.jsdelivr.net/npm/disqusjs@3.0/dist/browser/disqusjs.es2015.umd.min.js',
        document.body.appendChild(e);
        e.onload = () => {
            const disqusjs = new DisqusJS({
                shortname: "loafing",
                siteName: "若风",
                api: "https://disqus.skk.moe/disqus/",
                apikey: "rIX6mM39eSMZlAnZCchjnNRaL4sRMZvbUICi5oLnDShkSE23zY5Vw2EZ7dGwYHBn",
                admin: "CyberLoafing",
                adminLabel: "",
                identifier: "posts/Hello-Deepin-my-old-friend.html",
                url: "https://loafing.cn/posts/Hello-Deepin-my-old-friend.html",
                nesting: "4"
            });
            disqusjs.render(document.getElementById('disqusjs'));
        };
        (i = document.createElement("link")).rel = "stylesheet",
        i.href = 'https://cdn.jsdelivr.net/npm/disqusjs@3.0/dist/browser/styles/disqusjs.min.css',
        document.head.appendChild(i);
    }

    var runningOnBrowser = typeof window !== "undefined";
    var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
    var supportsIntersectionObserver = runningOnBrowser && "IntersectionObserver" in window;

    setTimeout(function () {
        if (!isBot && supportsIntersectionObserver) {
            var comment_observer = new IntersectionObserver(function(entries) {
                if (entries[0].isIntersecting) {
                    loadComment();
                    comment_observer.disconnect();
                }
            }, { threshold: [0] });
            comment_observer.observe(document.getElementById('comment'));
        } else {
            loadComment();
        }
    }, 1);</script><script src="https://fastly.jsdelivr.net/npm/hexo-tag-common@0.2.0/js/index.js"></script></body></html>